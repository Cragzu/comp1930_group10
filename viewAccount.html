<!DOCTYPE html>
<html lang="en">

<head>
    <title>StudySource | User Account</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="style/stylesheet.css">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.2.2/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-firestore.js"></script>
</head>
<body>

<!--Our Scripts-->
<script src="scripts/firebase_setup.js"></script>
<script src="scripts/displayHeader.js"></script> <!--Header should always be displayed first-->
    
    <div class="container">
        <div>
            <h1>Profile</h1>
        </div>
        <hr>
    <div class="row">
        <div class="col-sm-6">
            <a href="selling.html">
                <input class="btn inputbutton" type="button" value="Sell Books" id="sellBooksButton">
            </a>
        </div>
        <div class="col-sm-6">
            <input class="btn inputbutton" type="button" value="Settings">
        </div>
    </div>
        
        
    <div class="row">
        <div class="col-sm-6 form-group">
            <h4>Email</h4>
            <div class="form-control" id="emailbox">
            </div> 
        </div>
        <div class="col-sm-6 form-group ">
            <h4>Username</h4>
            <div class="form-control" id="emailbox">
            </div> 
        </div>
    </div>
    <input class="btn inputbutton" type="button" value="Purchased Books">
    <input class="btn inputbutton" type="button" value="Sold Books">

    </div>
    <script>
        let userStatus;
        let userInfo;

        // function insertUserData() {
        //     let user = firebase.auth().currentUser;
        //     let userDisplay = user.displayName;
        //
        //     let htmlEmail = document.getElementById("email");
        //
        //     htmlEmail.innerHTML += userEmail;
        //     console.log(userEmail);
        // }

        function init() {
            firebase.auth().onAuthStateChanged(function (user) {
                if (user) {

                    console.log(`There is a user logged in. User: ${user.displayName}`)
                    // userInfo = user;
                    x = user.displayName
                    e = user.email
                    console.log(`${x} and ${e}`)
                    db.collection("users").doc(user.displayName).set({
                        Name: x,
                        Email: e
                    })
                    userStatus = true
        
                } else {
                    console.log(`No one is logged in`)
                    userStatus = false
                }
            })

            document.getElementById("sellBooksButton").onclick = userSellsBooks;

        }
        init()


        function userSellsBooks() {
            document.location.href = "selling.html";
        }

    </script>

</body>

</html>