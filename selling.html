<!DOCTYPE html>
<html lang="en">

<head>
    <title>StudySource | Selling Product</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="style/stylesheet.css">

    <link rel="import" href="components/componentMainHeader.html" id="importHeader">
</head>

<body>
    <script src="scripts/displayHeader.js"></script>

    <h1> Selling </h1>
    <h4> Selling the textbooks </h4>

    <div>
        <form>
            <div>
                <label for="bookTitle">
                    Title of Book:
                </label>
                <input type="text" id="bookTitle" name="book_title"
                    placeholder="E.g. Writing In the Technical Fields 2nd Edition">
            </div>
            <div>
                <label fo="author">
                    Author:
                </label>
                <input type="text" id="authorName" name="author_name" placeholder="Thorsten Ewald">
            </div>
            <div>
                <label for="bookPrice">
                    Price:
                </label>
                <input type="text" id="bookPrice" name="book_price" placeholder="50.50">
            </div>
            <div>
                <label for="bookDescription">
                    Description:
                </label>
                <input type="text" id="bookDescription" name="book_description" placeholder="e.g. 7/10 condition. Only used for 1 term.">
                <!-- This needs to be changed CSS wise to allow scrolling and a bigger text box -->
            </div>
            <div>
                <input type="button" id="listButton" value="Post Listing">
            </div>
        </form>

    </div>

    <script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.2.2/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-firestore.js"></script>

    <script src="scripts/firebase_setup.js">
    </script>

    <script>


        let user = firebase.auth().currentUser;
        function listBook() {

            console.log("This is the start of listing a book.")


            db.collection("Books").add({
                // Right now the document is under bookTitle, but we may want to use generated ids and just keep book title as a field.
                Author: authorName,
                Title: bookTitle,
                Price: bookPrice
            }).then(function () {
                console.log("A book had been successfully listed.")
            }).catch(function () {
                console.log("User has failed trying to list a book.")
            })
        }


        function checkTextBox() {
            // This function will check all the text boxes first before you can list a book
            let bookTitle = document.getElementById("bookTitle").value;
            let authorName = document.getElementById("authorName").value;
            let bookPrice = document.getElementById("bookPrice").value;
            let bookDescription = document.getElementById("bookDescription").value;

            

        }

        function checkForNumbers(userInput) {
            // This function will take a string and put it in an array. That array will be tested to see if any of the elements in it are a number. If there is a number then return false, else return True at the end.
            let userInputArray = userInput.split("")
            console.log(userInputArray)
            for (let i = 0; i < userInputArray.length; i++) {
                if (!isNaN(userInputArray[i])) {
                    // This is checking if the string is a number or a string.
                    // !isNaN: is Not a Number Str = true, Num = false; ! is Not a Number Str = false, Num = true
                    return false

                } else {
                    console.log("That was a letter")
                }
                return true
            }
        }

        function checkOnlyNumbers(userInput){
            
        }


        firebase.auth().onAuthStateChanged(function (user) {
            if (user) {
                setInterval(function () {
                    console.log(`There is a user logged in. User: ${user}`)
                }, 2000)
            } else {
                console.log(`No one is logged in`)
            }
        })

        document.getElementById("listButton").onclick = checkTextBox;
        // When you click the button it will check the fields before you can list the book.

    </script>
</body>

</html>